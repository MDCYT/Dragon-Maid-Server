<%- include ('partials/header.ejs') %>

<body class="background-maid-dragon">

    <!--Logo here-->
    <div>
        <div class="row mt-4">
            <div class="col-md-12 justify-center flex">
                <div class="logo">
                    <img src="img/logo.png" alt="logo">
                </div>
            </div>

            <!-- Leaderboard logo with space -->
            <div class="col-md-12 mt-1 flex justify-center">
                <div class="logo">
                    <img src="img/world ranking.png" alt="logo">
                </div>
            </div>
        </div>
    </div>

    <div class="justify-center flex mt-4 mb-8 text-2xl font-black">
        <div class="w-4/5">
            <div class="flex justify-between mt-1 mb-1 space-x-4">
                <a href="/">
                    <div class="col-md-12 flex bg-lime-300 rounded-3xl p-2 px-8 hover:bg-lime-600 duration-300 transition border-black border-2">
                        USERS
                    </div>
                </a>
                <a class="col-md-12 flex bg-white rounded-3xl p-2 px-8 hover:bg-lime-600 duration-300 transition" href="/records">
                    SONGS
                </a>
            </div>
        </div>
    </div>

        <!-- If have data.error, show a alert-->
        <% if (data.error) { %>
            <div class="justify-center flex mt-10 mb-8">
                <div class="bg-red-600 text-white text-center text-2xl rounded-3xl p-6">
                    <%= data.error %><br><br>
                    Please try later.
                </div>
            </div>

            <div class="justify-center flex mt-10 mb-8">
                <a href="/" class="bg-green-300 text-black text-center text-2xl rounded-full p-6 hover:bg-green-400 duration-500 font-bold">
                        Refresh
                </a>
            </div>
        <% } else { %>
            <div class="justify-center flex mt-4 mb-8">

                <div class="w-4/5">
                    <!-- Separate line -->
                    <div class="bg-white font-black  text-center rounded-3xl p-4">
                        <div class="row flex justify-between  pb-2">
                            <h2>Username</h2>
                            <h2>Coins</h2>
                        </div>
                        <hr class="mb-2">
        
                        <% data.forEach(user => { %>
                        <div class="row flex justify-between my-2">
                            <div class="col-md-6 row justify-between flex align-middle items-center">
                                <p class="text-xl"><% if(user.rank === 1) { %>
                                    <p class="text-white leading-7 bg-yellow-400 w-8 h-8 rounded-full">1.</p>
                                <% } else if(user.rank === 2) { %>
                                    <p class="text-white leading-7 bg-gray-600 w-8 h-8 rounded-full">2.</p>
                                <% } else if(user.rank === 3) { %>
                                    <p class="text-white leading-7 bg-orange-700 w-8 h-8 rounded-full">3.</p>
                                <% } else { %>
                                    <p class="text-black"><%= user.rank %>.</p>
                                <% } %>
                                &nbsp;<%= user.username %></p>
                            </p>
                                <!--White space-->
                                <p class="text-xl">&nbsp;</p>
                                <img src="<%= user.avatar %>" alt="avatar" class="rounded-full w-8">
                            </div>
                            <div>
                                <p><%= user.coins %></p>
                            </div>
                        </div>
                        <% }) %>
                    </div>
        
                    <!-- One button for back in the leaderboard, a input for put a page number, and a button for next page -->
                    <div class="row flex justify-center py-4">
                        <a href="/?page=<%= page - 1 %>&limit=<%= limit %>" class="bg-lime-400 hover:bg-lime-600 hover:text-white font-bold py-1 px-4 rounded text-xl duration-300 text-black">Back
                        </a>
                        <form id="search-form">
                            <input id="search-input"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 mx-3 text-center"
                            type="text" placeholder="Page">
                        </form>
                        <a class="bg-lime-400 hover:bg-lime-600 hover:text-white font-bold py-1 px-4 rounded text-xl duration-300 text-black"
                            href="/?page=<%= page + 1 %>&limit=<%= limit %>">Next</a>
                    </div>
        
        
        
                </div>
            </div>
        <% } %>


        <script src="js/index.js"></script>
</body>

</html>